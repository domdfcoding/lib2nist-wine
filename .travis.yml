# This file is managed by 'repo_helper'. Don't edit it directly.
---

language: python
dist: focal
cache: pip
python:
  - '3.6'
  - '3.7'
  - '3.8'

arch:
  - amd64
  - arm64
install:

  - pip install --upgrade pip
  - pip install tox tox-travis

  - pip install -r manpage-builder/requirements.txt

script:
  - tox -vv


stages:
  - test
  - deploy_pypi


jobs:
  allow_failures:
    - arch: arm64

  exclude:
    - python: '3.7'
      arch: arm64
    - python: '3.8'
      arch: arm64

  include:
    - stage: test
      dist: bionic
      python: 3.8

    - stage: deploy_pypi
      python: "3.6"
      script: skip
      deploy:
        on:
          tags: true
          repo: domdfcoding/msp2lib
        provider: pypi
        user: "DomDF"
        password:
          secure: JHMpHZo87XPAfrFDd4C4UjToFrxjE9PVYuXbWyspDmA6gWpfPCWd0ZHGFfUZjBW/oiBrXU/DjnLUhY9M2UHwBrj/o90z6+rzdyp0BmB1q4WQ4FAjftpyjn0hCW5O4UjqT2Att5I+VfewAkM1SOsSYBJJB0l+mNAQ3emjepjJJPai8mXZB9/rhDmSn/8jUX79vuWpOqVx4NKEtKUG+62J0FPlSRngJPYcfJYSjdH4T0sAP9afVUVQqYOg294m2ye7ZPmcug2Dr+MPNG4F77CoAszpj4oGHPzrS27BmR0I8uMDsYFm3PiFn1lru/UzI1aKvJ4YCaZ1kN2NuXXCkr3gM/Q5kgtEh/Bft0dzP4Auihm5svg1hHXzOXmIrBsosfczgDFUZrhZk7awqPnx4Y0goivfgIwY7fXZuZGRLZUyWYZ18R+VWBFn9jQyEricUX7dQYk61A6CB6aVNaPg/tSaV4TV8k4sqiEfWoqR1AjZuyjS4cGDexd4xiuoKi/r6PelGoXJeQAKZUQX5DVkTONiheOdhy8yNQnsQYb5jJPGlMI56G1dn5sseH2UmXb90xd4frdg9Fa/5DTxSL6fzowWCrDlr4gcS+4JVgvnr5I9hwH4p4xrT5Wp+IIwFplQwpQ15mCoau1Ptqsmv3DBNtCJg3tbo4KEYuI9zFBDyXspycg=
        distributions: "sdist bdist_wheel"
        skip_existing: true
